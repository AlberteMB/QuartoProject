# Cognito AWS

## üìå ¬øQu√© es Cognito?

**Amazon Cognito** es un servicio de AWS que permite manejar la **autenticaci√≥n, autorizaci√≥n y gesti√≥n de usuarios** para aplicaciones m√≥viles y web.

Con Cognito puedes:

- Registrar/iniciar sesi√≥n usuarios (usuarios propios o federados).
- Autenticarlos con correo, tel√©fono, redes sociales o proveedores externos.
- Manejar sesiones, tokens y renovaciones.
- Controlar el acceso a recursos mediante pol√≠ticas (IAM, API Gateway, etc.).

---

## üß± Componentes principales

| Componente             | Descripci√≥n |
|------------------------|-------------|
| **User Pool**          | Base de datos de usuarios gestionada por Cognito. Maneja el registro, login, recuperaci√≥n de contrase√±a, MFA, etc. |
| **Identity Pool**      | Proporciona credenciales temporales de AWS (IAM) para acceder a otros servicios. Integra con User Pools o terceros. |
| **Federated Identities** | Permite loguearse con Google, Facebook, Apple, SAML, etc., adem√°s de los usuarios del User Pool. |

---

## üë§ User Pool: flujo t√≠pico

1. **Registro del usuario:** Correo, tel√©fono u otros atributos.
2. **Confirmaci√≥n (opcional):** C√≥digo por email/SMS.
3. **Login:** Se valida el usuario y contrase√±a.
4. **Tokens:** Se generan tokens JWT (`id_token`, `access_token`, `refresh_token`).
5. **Autorizaci√≥n:** Usas el `access_token` para acceder a recursos protegidos.

---

## üîê Tipos de tokens

| Token           | Uso |
|------------------|-----|
| `id_token`       | Informaci√≥n del usuario autenticado (como nombre o email). |
| `access_token`   | Usado para acceder a APIs autorizadas. |
| `refresh_token`  | Permite obtener nuevos tokens sin volver a iniciar sesi√≥n. |

---

## üõ†Ô∏è Operaciones comunes (API / SDK)

| Acci√≥n               | Descripci√≥n |
|----------------------|-------------|
| `SignUp`             | Registra un nuevo usuario. |
| `ConfirmSignUp`      | Confirma el registro mediante un c√≥digo. |
| `SignIn`             | Autentica al usuario y devuelve los tokens. |
| `ForgotPassword`     | Inicia proceso de recuperaci√≥n. |
| `ConfirmForgotPassword` | Restablece la contrase√±a. |
| `GetUser`            | Recupera los atributos del usuario autenticado. |

---

## üß™ Ejemplo de flujo con AWS CLI

```bash
# Registro de usuario
aws cognito-idp sign-up \
  --client-id YOUR_APP_CLIENT_ID \
  --username alberte@example.com \
  --password 'Contrase√±aSegura123!' \
  --user-attributes Name=email,Value=alberte@example.com

# Confirmaci√≥n del usuario
aws cognito-idp confirm-sign-up \
  --client-id YOUR_APP_CLIENT_ID \
  --username alberte@example.com \
  --confirmation-code 123456
```

---

## üß© Identity Pool

- Se usa para obtener **credenciales temporales de AWS** una vez que el usuario est√° autenticado.
- Puede funcionar con:
  - Cognito User Pools
  - Proveedores sociales (Google, Facebook)
  - SAML
  - Proveedores personalizados (OpenID)

---

## ‚öôÔ∏è Integraci√≥n t√≠pica

- **Frontend (React, Angular, etc.):** Se autentica con Cognito y almacena los tokens JWT.
- **Backend (API REST o GraphQL):** Valida el token (`access_token`) para permitir o denegar acceso.
- **Otros servicios de AWS:** Se accede con permisos IAM temporales v√≠a Identity Pool.

---

## üîê Seguridad

- Soporte para **MFA** (autenticaci√≥n multifactor).
- Reglas de complejidad de contrase√±as.
- Validaci√≥n de correo y tel√©fono.
- Bloqueo autom√°tico tras intentos fallidos.

---

## üì¶ Librer√≠as √∫tiles

| Lenguaje/Framework | Librer√≠a recomendada |
|--------------------|----------------------|
| JavaScript/TypeScript | `amazon-cognito-identity-js` |
| Java/Kotlin (Spring) | `aws-java-sdk-cognitoidp` |
| Python (Flask, Django) | `boto3` |
| Mobile (iOS/Android) | AWS Amplify, SDKs nativos |

---

## üìö Recursos √∫tiles

- [Documentaci√≥n oficial de Amazon Cognito](https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-identity-pools.html)
- [Introducci√≥n a Cognito en YouTube (AWS)](https://www.youtube.com/watch?v=5pXwTtvz6mU)
- [Ejemplo con Spring Boot + Cognito](https://github.com/aws-samples/amazon-cognito-idp-java-spring-boot)

---

¬øQuieres que esta gu√≠a est√© orientada directamente a tu proyecto Film Advisor y el stack que usas?
